{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Dno\\\\Desktop\\\\pu-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Dno\\\\Desktop\\\\pu-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Dno\\\\Desktop\\\\pu-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Dno\\\\Desktop\\\\pu-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Dno\\\\Desktop\\\\pu-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import AppBarHome from\"../home/AppBarHome\";import HomeFooter from\"../home/HomeFooter\";import TFString from\"../../inputs/TFString\";import CheckSmsCodeButtonLarge from\"../../buttons/CheckSmsCodeButtonLarge\";import ResendSmsCodeButton from\"../../buttons/ResendSmsCodeButton\";import{Redirect}from'react-router-dom';import axios from\"axios\";import{api_endpoint}from\"../../../settings\";var loginHolder={marginTop:\"100px\",width:\"300px\"};var wrapper={display:\"flex\",justifyContent:\"center\"};var hintStyle={textAlign:\"left\",fontSize:\"14px\",fontFamily:\"ProximaNova, sans-serif\",fontWeight:\"bold\",marginTop:\"20px\",marginBottom:\"0\",marginLeft:\"30px\",opacity:\"0.6\"};var spacer={height:\"40px\",width:\"100%\"};var LoginEnterSmsCode=/*#__PURE__*/function(_React$Component){_inherits(LoginEnterSmsCode,_React$Component);function LoginEnterSmsCode(props){var _this;_classCallCheck(this,LoginEnterSmsCode);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoginEnterSmsCode).call(this,props));_this.handleSmsCheckResponse=function(resp){if(resp.status==='OK'){sessionStorage.setItem('key',resp.response.key);_this.setState({dashboardRedirect:true});}else{_this.setState({dashboardRedirect:false});//show errors\n}};_this.startCounter=function(){var newCounter=_this.state.counter-1;if(newCounter>=0){setTimeout(function(){_this.setState({counter:newCounter});_this.startCounter();},1000);}};var intViewportHeight=window.innerHeight-458;_this.state={divHeight:intViewportHeight,dashboardRedirect:false,counter:60};_this.tf_smscode=React.createRef();_this.startCounter();return _this;}_createClass(LoginEnterSmsCode,[{key:\"generateLoginHolderStyle\",value:function generateLoginHolderStyle(){return{minHeight:this.state.divHeight};}},{key:\"render\",value:function render(){if(!this.state.dashboardRedirect){return React.createElement(\"div\",{style:loginHolder},React.createElement(\"p\",{style:hintStyle},\"Input SMS code\"),React.createElement(TFString,{tf_required:\"required\",tf_variant:\"outlined\",tf_margin:\"normal\",tf_default_value:\"\",tf_enabled:\"true\",tf_max_width:\"255px\",ref:this.tf_smscode}),React.createElement(\"div\",{style:spacer}),React.createElement(CheckSmsCodeButtonLarge,{etSmsCodeRef:this.tf_smscode,smsCodeCheckHandler:this.handleSmsCheckResponse,key:sessionStorage.getItem('key'),token:sessionStorage.getItem('token')}),this.state.counter===0?React.createElement(ResendSmsCodeButton,{resendSMS:this.props.reSendSMS}):'You can resend new code via '+this.state.counter);}else{return React.createElement(Redirect,{push:true,to:\"/dashboard\"});}}}]);return LoginEnterSmsCode;}(React.Component);export{LoginEnterSmsCode as default};","map":{"version":3,"sources":["C:/Users/Dno/Desktop/pu-web/src/components/pages/login/LoginEnterSmsCode.js"],"names":["React","AppBarHome","HomeFooter","TFString","CheckSmsCodeButtonLarge","ResendSmsCodeButton","Redirect","axios","api_endpoint","loginHolder","marginTop","width","wrapper","display","justifyContent","hintStyle","textAlign","fontSize","fontFamily","fontWeight","marginBottom","marginLeft","opacity","spacer","height","LoginEnterSmsCode","props","handleSmsCheckResponse","resp","status","sessionStorage","setItem","response","key","setState","dashboardRedirect","startCounter","newCounter","state","counter","setTimeout","intViewportHeight","window","innerHeight","divHeight","tf_smscode","createRef","minHeight","getItem","reSendSMS","Component"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport AppBarHome from \"../home/AppBarHome\";\r\nimport HomeFooter from \"../home/HomeFooter\";\r\nimport TFString from \"../../inputs/TFString\";\r\nimport CheckSmsCodeButtonLarge from \"../../buttons/CheckSmsCodeButtonLarge\";\r\nimport ResendSmsCodeButton from \"../../buttons/ResendSmsCodeButton\";\r\nimport { Redirect } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport {api_endpoint} from \"../../../settings\";\r\n\r\n\r\nconst loginHolder = {\r\n    marginTop: \"100px\",\r\n    width: \"300px\",\r\n};\r\n\r\nconst wrapper = {\r\n    display: \"flex\",\r\n    justifyContent: \"center\"\r\n}\r\n\r\nconst hintStyle = {\r\n    textAlign: \"left\",\r\n    fontSize: \"14px\",\r\n    fontFamily: \"ProximaNova, sans-serif\",\r\n    fontWeight: \"bold\",\r\n    marginTop: \"20px\",\r\n    marginBottom: \"0\",\r\n    marginLeft: \"30px\",\r\n    opacity: \"0.6\"\r\n};\r\n\r\nconst spacer = {\r\n    height: \"40px\",\r\n    width: \"100%\"\r\n};\r\n\r\n\r\n\r\nexport default class LoginEnterSmsCode extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        let intViewportHeight = window.innerHeight - 458;\r\n        this.state = {\r\n            divHeight: intViewportHeight,\r\n            dashboardRedirect: false,\r\n            counter: 60\r\n        };\r\n        this.tf_smscode = React.createRef();\r\n        this.startCounter()\r\n\r\n    }\r\n\r\n    generateLoginHolderStyle() {\r\n        return {\r\n            minHeight: this.state.divHeight,\r\n        }\r\n    }\r\n\r\n\r\n    handleSmsCheckResponse = (resp) => {\r\n        if(resp.status === 'OK') {\r\n            sessionStorage.setItem('key', resp.response.key);\r\n            this.setState({dashboardRedirect: true});\r\n        }\r\n        else {\r\n            this.setState({dashboardRedirect: false});\r\n            //show errors\r\n        }\r\n    }\r\n\r\n    startCounter = () => {\r\n        let newCounter = this.state.counter-1;\r\n\r\n        if(newCounter >= 0) {\r\n            setTimeout(()=>{\r\n                this.setState({\r\n                    counter: newCounter,\r\n                });\r\n                this.startCounter()\r\n            }, 1000)\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.dashboardRedirect) {\r\n            return (\r\n              <div style={loginHolder}>\r\n                  <p style={hintStyle}>Input SMS code</p>\r\n                  <TFString\r\n                    tf_required=\"required\"\r\n                    tf_variant=\"outlined\"\r\n                    tf_margin=\"normal\"\r\n                    tf_default_value=\"\"\r\n                    tf_enabled=\"true\"\r\n                    tf_max_width=\"255px\"\r\n                    ref={this.tf_smscode}\r\n                  />\r\n                  <div style={spacer}/>\r\n                  <CheckSmsCodeButtonLarge\r\n                    etSmsCodeRef={this.tf_smscode}\r\n                    smsCodeCheckHandler={this.handleSmsCheckResponse}\r\n                    key = {sessionStorage.getItem('key')}\r\n                    token = {sessionStorage.getItem('token')}\r\n                  />\r\n                  {this.state.counter===0 ? <ResendSmsCodeButton resendSMS={this.props.reSendSMS} /> : 'You can resend new code via '+this.state.counter}\r\n              </div>\r\n            );\r\n        }\r\n        else {\r\n            return <Redirect push to=\"/dashboard\"/>;\r\n        }\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}